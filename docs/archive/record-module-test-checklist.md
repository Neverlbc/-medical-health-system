# 健康档案模块手动验证清单

**验证日期**：2025-11-22  
**验证人**：  
**系统版本**：v1.0-dev

---

## 📋 验证前准备

### 环境检查
- [ ] 后端服务已启动（端口 8080）
- [ ] 前端服务已启动（端口 5173）
- [ ] 数据库连接正常
- [ ] Redis 连接正常（如需要）

### 测试账号
| 角色 | 用户名 | 密码 | 用途 |
|------|--------|------|------|
| 患者 | bosslbc | 123456 | 测试患者功能 |
| 患者 | patient1 | 123456 | 测试权限隔离 |
| 医生 | doctor1 | 123456 | 测试医生功能 |
| 管理员 | admin | admin123 | 测试管理员功能 |

---

## 🧪 患者角色功能验证

### 1. 登录与导航
- [ ] 使用患者账号登录成功
- [ ] 进入患者仪表盘
- [ ] 点击"我的档案"菜单，进入档案列表页

### 2. 创建档案
- [ ] 点击"新建档案"按钮
- [ ] 填写档案信息：
  - [ ] 过敏史：`青霉素过敏`
  - [ ] 家族病史：`父亲有高血压`
  - [ ] 既往病史：`无重大疾病史`
  - [ ] 用药史：`长期服用维生素C`
  - [ ] 备注：`定期体检`
- [ ] 点击"保存"
- [ ] 验证：
  - [ ] 显示成功提示
  - [ ] 列表中出现新创建的档案
  - [ ] 档案信息正确显示

### 3. 查看档案列表
- [ ] 列表显示正常
- [ ] 只能看到自己的档案（不能看到其他患者的）
- [ ] 搜索功能：
  - [ ] 输入关键词"高血压"
  - [ ] 点击搜索
  - [ ] 验证：相关档案被筛选出来
- [ ] 清空搜索：
  - [ ] 清除搜索框
  - [ ] 验证：显示所有自己的档案

### 4. 查看档案详情
- [ ] 点击某个档案的"查看"按钮
- [ ] 进入详情页
- [ ] 验证：
  - [ ] 所有字段正确显示
  - [ ] 过敏史、家族病史等信息完整
  - [ ] 创建时间、更新时间显示正确

### 5. 上传附件
- [ ] 在详情页点击"上传附件"
- [ ] 选择文件：
  - [ ] 测试图片文件（jpg/png）
  - [ ] 测试 PDF 文件
- [ ] 验证：
  - [ ] 上传成功提示
  - [ ] 附件列表中显示新上传的文件
  - [ ] 文件名、大小显示正确
  - [ ] 图片可以预览
  - [ ] PDF 显示图标

### 6. 下载附件
- [ ] 点击附件的"下载"按钮
- [ ] 验证：
  - [ ] 文件下载成功
  - [ ] 文件内容正确

### 7. 删除附件
- [ ] 点击附件的"删除"按钮
- [ ] 确认删除
- [ ] 验证：
  - [ ] 附件从列表中移除
  - [ ] 显示成功提示

### 8. 编辑档案
- [ ] 返回列表页
- [ ] 点击某个档案的"编辑"按钮
- [ ] 修改信息：
  - [ ] 过敏史改为：`青霉素、磺胺类过敏`
  - [ ] 备注改为：`需要定期复查`
- [ ] 点击"保存"
- [ ] 验证：
  - [ ] 显示成功提示
  - [ ] 详情页显示更新后的信息
  - [ ] 更新时间已变化

### 9. 权限验证（重要）
- [ ] 尝试访问其他患者的档案详情（通过修改 URL）
- [ ] 验证：
  - [ ] 显示权限错误或跳转到列表页
  - [ ] 无法查看他人档案

---

## 👨‍⚕️ 医生/管理员角色功能验证

### 1. 登录与导航
- [ ] 使用医生/管理员账号登录
- [ ] 进入医生仪表盘
- [ ] 点击"档案查询"菜单

### 2. 查看所有档案
- [ ] 列表显示正常
- [ ] 可以看到所有患者的档案
- [ ] 验证：
  - [ ] 显示不同患者的档案
  - [ ] 每个档案显示患者信息

### 3. 按患者筛选
- [ ] 在"我的患者"页面选择一个患者
- [ ] 点击"查看档案"
- [ ] 验证：
  - [ ] 只显示该患者的档案
  - [ ] 筛选功能正常

### 4. 搜索功能
- [ ] 输入关键词搜索
- [ ] 验证：
  - [ ] 搜索结果正确
  - [ ] 可以搜索到不同患者的档案

### 5. 为患者创建档案
- [ ] 点击"新建档案"
- [ ] 选择患者（如果有选择器）
- [ ] 填写档案信息
- [ ] 保存
- [ ] 验证：
  - [ ] 档案创建成功
  - [ ] 档案归属于指定患者

### 6. 查看任意患者档案
- [ ] 点击任意档案的"查看"
- [ ] 验证：
  - [ ] 可以正常查看
  - [ ] 所有信息显示正确

### 7. 编辑任意患者档案
- [ ] 点击任意档案的"编辑"
- [ ] 修改信息
- [ ] 保存
- [ ] 验证：
  - [ ] 编辑成功
  - [ ] 信息更新正确

---

## 🔒 安全性验证

### 1. 未登录访问
- [ ] 退出登录
- [ ] 尝试直接访问档案页面
- [ ] 验证：
  - [ ] 跳转到登录页
  - [ ] 无法访问受保护的页面

### 2. 跨患者访问
- [ ] 登录为患者A
- [ ] 记录患者B的档案ID
- [ ] 尝试访问患者B的档案（修改URL）
- [ ] 验证：
  - [ ] 显示权限错误
  - [ ] 无法查看他人档案

### 3. 跨患者编辑
- [ ] 登录为患者A
- [ ] 尝试编辑患者B的档案
- [ ] 验证：
  - [ ] 无法编辑
  - [ ] 显示权限错误

---

## 🎨 用户体验验证

### 1. 加载状态
- [ ] 创建档案时显示加载状态
- [ ] 列表加载时显示 loading
- [ ] 上传文件时显示进度

### 2. 错误提示
- [ ] 必填字段为空时显示错误
- [ ] 文件大小超限时显示错误
- [ ] 网络错误时显示友好提示

### 3. 成功反馈
- [ ] 创建成功显示提示
- [ ] 编辑成功显示提示
- [ ] 删除成功显示提示

### 4. 界面美观
- [ ] 表格样式美观
- [ ] 按钮布局合理
- [ ] 表单排版清晰
- [ ] 响应式设计正常

---

## 📊 边界情况验证

### 1. 空数据
- [ ] 新用户无档案时显示空状态
- [ ] 空状态提示友好

### 2. 大量数据
- [ ] 创建多条档案（10+）
- [ ] 验证：
  - [ ] 分页功能正常
  - [ ] 性能无明显问题

### 3. 特殊字符
- [ ] 在备注中输入特殊字符（如 `<script>`）
- [ ] 验证：
  - [ ] 正确转义，无 XSS 风险
  - [ ] 显示正常

### 4. 长文本
- [ ] 输入很长的备注（1000+ 字符）
- [ ] 验证：
  - [ ] 保存成功
  - [ ] 显示正常（截断或滚动）

---

## ✅ 验证结果汇总

### 发现的问题
| 序号 | 问题描述 | 严重程度 | 状态 |
|------|----------|----------|------|
| 1 | | | |
| 2 | | | |
| 3 | | | |

### 验收结论
- [ ] **通过**：所有功能正常，可以发布
- [ ] **有条件通过**：有小问题，但不影响主要功能
- [ ] **不通过**：存在严重问题，需要修复

### 备注


---

**验证完成时间**：  
**签名**：  

